import os
import mysql.connector
from dotenv import load_dotenv

load_dotenv()

conn = mysql.connector.connect(
    host=os.getenv('DB_HOST'),
    user=os.getenv('DB_USER'),
    password=os.getenv('DB_PASSWORD'),
    database=os.getenv('DB_NAME'),
    port=int(os.getenv('DB_PORT', 3306))
)

cursor = conn.cursor()

cursor.execute("""
CREATE TABLE IF NOT EXISTS exam_results (
    STID VARCHAR(32),
    STNAME VARCHAR(128),
    FATHER VARCHAR(128),
    ROLLNO VARCHAR(32),
    CLASS VARCHAR(64),
    ExID VARCHAR(32),
    EXNM VARCHAR(128),
    ExDt VARCHAR(32),
    Duration VARCHAR(16),
    QTYPE VARCHAR(32),
    S1NM VARCHAR(64),
    S2NM VARCHAR(64),
    S3NM VARCHAR(64),
    S4NM VARCHAR(64),
    S5NM VARCHAR(64),
    TOPIC1 VARCHAR(128),
    TOPIC2 VARCHAR(128),
    TOPIC3 VARCHAR(128),
    TOPIC4 VARCHAR(128),
    TOPIC5 VARCHAR(128),
    S1Max INT,
    S2Max INT,
    S3Max INT,
    S4Max INT,
    S5Max INT,
    S1Min INT,
    S2Min INT,
    S3Min INT,
    S4Min INT,
    S5Min INT,
    QS1Cor INT,
    QS2Cor INT,
    QS3Cor INT,
    QS4Cor INT,
    QS5Cor INT,
    QS1Inc INT,
    QS2Inc INT,
    QS3Inc INT,
    QS4Inc INT,
    QS5Inc INT,
    QS1Una INT,
    QS2Una INT,
    QS3Una INT,
    QS4Una INT,
    QS5Una INT,
    QS1Can VARCHAR(255),
    QS2Can VARCHAR(255),
    QS3Can VARCHAR(255),
    QS4Can VARCHAR(255),
    QS5Can VARCHAR(255),
    QS1CorIds TEXT,
    QS2CorIds TEXT,
    QS3CorIds TEXT,
    QS4CorIds TEXT,
    QS5CorIds TEXT,
    QS1IncorIds TEXT,
    QS2IncorIds TEXT,
    QS3IncorIds TEXT,
    QS4IncorIds TEXT,
    QS5IncorIds TEXT,
    QS1Leftids TEXT,
    QS2Leftids TEXT,
    QS3Leftids TEXT,
    QS4Leftids TEXT,
    QS5Leftids TEXT,
    QS1Canc VARCHAR(255),
    QS2Canc VARCHAR(255),
    QS3Canc VARCHAR(255),
    QS4Canc VARCHAR(255),
    QS5Canc VARCHAR(255),
    QS1Mk FLOAT,
    QS2Mk FLOAT,
    QS3Mk FLOAT,
    QS4Mk FLOAT,
    QS5Mk FLOAT,
    S1Mk FLOAT,
    S2Mk FLOAT,
    S3Mk FLOAT,
    S4Mk FLOAT,
    S5Mk FLOAT,
    S1GMax FLOAT,
    S2GMax FLOAT,
    S3GMax FLOAT,
    S4GMax FLOAT,
    S5GMax FLOAT,
    S1GMin FLOAT,
    S2GMin FLOAT,
    S3GMin FLOAT,
    S4GMin FLOAT,
    S5GMin FLOAT,
    S1Avg FLOAT,
    S2Avg FLOAT,
    S3Avg FLOAT,
    S4Avg FLOAT,
    S5Avg FLOAT,
    ExMk FLOAT,
    AllExMk FLOAT,
    ExGMax FLOAT,
    ExGmin FLOAT,
    ExAvg FLOAT,
    ExRnk INT,
    ClassExRnk INT,
    FinRnk INT,
    ClassRnk INT,
    EXSTCOUNT INT,
    EXCLASSSTCOUNT INT,
    AllExCount INT,
    CLASSSTCOUNT INT,
    CNTBELOW INT,
    CNTABOVE INT,
    PHONE VARCHAR(32),
    S6NM VARCHAR(64),
    S7NM VARCHAR(64),
    S8NM VARCHAR(64),
    S9NM VARCHAR(64),
    S10NM VARCHAR(64),
    TOPIC6 VARCHAR(128),
    TOPIC7 VARCHAR(128),
    TOPIC8 VARCHAR(128),
    TOPIC9 VARCHAR(128),
    TOPIC10 VARCHAR(128),
    S6MAX INT,
    S7MAX INT,
    S8MAX INT,
    S9MAX INT,
    S10MAX INT,
    S6MIN INT,
    S7MIN INT,
    S8MIN INT,
    S9MIN INT,
    S10MIN INT,
    QS6COR INT,
    QS7COR INT,
    QS8COR INT,
    QS9COR INT,
    QS10COR INT,
    QS6INC INT,
    QS7INC INT,
    QS8INC INT,
    QS9INC INT,
    QS10INC INT,
    QS6UNA INT,
    QS7UNA INT,
    QS8UNA INT,
    QS9UNA INT,
    QS10UNA INT,
    QS6CAN VARCHAR(255),
    QS7CAN VARCHAR(255),
    QS8CAN VARCHAR(255),
    QS9CAN VARCHAR(255),
    QS10CAN VARCHAR(255),
    QS6CORIDS TEXT,
    QS7CORIDS TEXT,
    QS8CORIDS TEXT,
    QS9CORIDS TEXT,
    QS10CORIDS TEXT,
    QS6INCORIDS TEXT,
    QS7INCORIDS TEXT,
    QS8INCORIDS TEXT,
    QS9INCORIDS TEXT,
    QS10INCORIDS TEXT,
    QS6LEFTIDS TEXT,
    QS7LEFTIDS TEXT,
    QS8LEFTIDS TEXT,
    QS9LEFTIDS TEXT,
    QS10LEFTIDS TEXT,
    QS6CANC VARCHAR(255),
    QS7CANC VARCHAR(255),
    QS8CANC VARCHAR(255),
    QS9CANC VARCHAR(255),
    QS10CANC VARCHAR(255),
    QS6MK FLOAT,
    QS7MK FLOAT,
    QS8MK FLOAT,
    QS9MK FLOAT,
    QS10MK FLOAT,
    S6MK FLOAT,
    S7MK FLOAT,
    S8MK FLOAT,
    S9MK FLOAT,
    S10MK FLOAT,
    S6GMAX FLOAT,
    S7GMAX FLOAT,
    S8GMAX FLOAT,
    S9GMAX FLOAT,
    S10GMAX FLOAT,
    S6GMIN FLOAT,
    S7GMIN FLOAT,
    S8GMIN FLOAT,
    S9GMIN FLOAT,
    S10GMIN FLOAT,
    S6AVG FLOAT,
    S7AVG FLOAT,
    S8AVG FLOAT,
    S9AVG FLOAT,
    S10AVG FLOAT,
    PRIMARY KEY (STID, ExID)
)
""")

conn.commit()
conn.close()
